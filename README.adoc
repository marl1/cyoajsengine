:toc:

A set of Javascript functions to easily write text adventures in English.

Have fun with it.

image::exemple.png[]

==== FEATURES

* Load/save system.
* Inventory.
* Redirect on already visited episode (and can manage circular redirects).
* Go backward (adjusting inventory accordingly!).
* Safeguards (auto-detect duplicate names, detect paths that leads nowhere...)
* Vanilla Javascript.

==== Demo
A sample game illustrating all the features:
https://marclv.gitlab.io/cyoajsengine/jeux/1_jeu_exemple/index.htm

==== Base Fonctions

*episode* : this is the base function to create an episode. An episode is a reusable "step" in the player's adventure. It's usually a location ("in front of the cave") or an event ("meeting with the king").

----
episode({
    clef: "uniqueIdentifierOfTheEpisode",
    titre : () => `The title of this episode (for instance "Arrival in the village")`,
    texte: () => `This is the description of this episode (location, player actions...).`
    ,liens: [
            {libelle: () => `This is a link to another episode.`,
            chemin: "anotherEpisode"},
            {libelle: () => `This is a second link.`,
            chemin: "aThirdEpisode"}
        ]
    ,image: "imageFileName.png"
});
----


*setGameTitle* : donne un titre au jeu. Il sera utilisé lors de l'enregistrement des sauvegardes, pour differencier les sauvegardes d'un jeu d'un autre.

====== Commandes

Commandes utilisées dans les épisodes, exemple avec la fonction "giveToPlayer" ci-dessous :
[source,javascript]
----
episode({
    clef: "allerInterim",
    titre : `Aller à l'agence d'interim.`,
    texte :`Vous travaillez avec l'agence et gagnez ***50 euros***.`
    ,commandes: () => {
		    giveToPlayer({clef:"euros", nom:"Euros", description:"Des euros.", nombre:50});
    }
});
----

*giveToPlayer* : `giveToPlayer({clef:"idDeVotreObjet", nom:"Le nom de mon bel objet", description:"Ceci est mon bel objet.", nombre:99});` Ajouter ou retirer (en donnant un nombre négatif) un objet de l'inventaire.

*giveSilentlyToPlayer* : `giveSilentlyToPlayer({clef:"idDeVotreObjet", nom:"Le nom de mon bel objet", description:"Ceci est mon bel objet.", nombre:99});` : ajouter ou retirer (en donnant un nombre négatif) un objet de l'inventaire. Ne sera pas mis en valeur. Utile notamment pour donner quelque chose au joueur au début de l'aventure, ou de manière générale lorsqu'on ne veut pas attirer l'attention sur quelque chose qu'il reçoit.

*addLink* : ``addLink({libelle: `Nouveau lien.`, chemin: "cheminDuNouveauLien"});``. Ajouter un lien. Si un lien identique existe déjà, il ne sera pas ajouté.

*addText* : ``addText(`Nouveau texte !`);``. Ajoute un texte à la fin de l'épisode en cours ou d'un épisode spécifié.

*setVariable* : ``setVariable("nomDeMaVariable", 18);``. Donne une valeur à une nouvelle variable ou modifie une variable existant.

*getNumberOf* : `getNumberOf("pioche")`. Renvoie le nombre d'exemplaire de l'objet renseigné que possède le joueur. Utile pour metre des conditions en place, par exemple "si le joueur possède au moins 4 roues, alors...".

*getNumberOfVisits* : retourne le nombre de visite précédentes de l'épisode en cours.

*replaceAllLinks* : ``replaceAllLinks({libelle: `Nouveau lien.`, chemin: "cheminDuNouveauLien"});``. Supprime tous les liens et remplace par d'autres.

*remplaceAllText* : ``remplaceAllText(`Nouveau texte !`);``. Remplace tout le texte de l'épisode en cours ou d'un épisode spécifié.

*showVariable* : ``showVariable("nomVariable")``. Retourne la valeur d'une variable.

*variable* : ``variable("nomVariable")`` ou ``variable("nomVariable", "nouvelleValeur")``. Retourne la valeur d'une variable OU modifie une variable. Notation raccourcie de showVar et updateVar.

=== LICENSE
CC0 License under French law.